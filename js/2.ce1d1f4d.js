(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0bac":function(e,t,o){"use strict";o.r(t);var a,n,l=o("2877"),s={},i=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=i.exports},"8b24":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{attrs:{padding:""}},[e.showInstallPromotion?o("q-banner",{staticClass:"bg-grey-3 col q-mb-md",scopedSlots:e._u([{key:"avatar",fn:function(){return[o("q-icon",{attrs:{name:"download",color:"primary"}})]},proxy:!0},{key:"action",fn:function(){return[o("q-btn",{attrs:{flat:"",color:"primary",label:"dismiss"}}),o("q-btn",{attrs:{flat:"",color:"primary",label:"Do it!"},on:{click:e.install}})]},proxy:!0}],null,!1,3527916625)},[e._v("\n      You can install this app locally.\n      ")]):e._e(),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("q-table",{attrs:{name:"Employe",data:e.employes,columns:e.columns,"row-key":"name",filter:e.filter,pagination:e.initialPagination},scopedSlots:e._u([{key:"top",fn:function(t){return[o("span",{staticClass:"text-h5"},[e._v("Employe")]),o("q-input",{staticClass:"q-ml-xl",attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),o("q-space"),o("q-btn",{staticClass:"q-ml-sm",attrs:{color:"positive",label:"Refresh","no-caps":""},on:{click:e.showAll}}),o("q-btn",{staticClass:"q-ml-sm",attrs:{color:"primary",label:"Add","no-caps":""},on:{click:function(t){e.addDialog=!0}}})]}},{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{key:"_id",attrs:{props:t}},[e._v(e._s(t.row._id))]),o("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name))]),o("q-td",{key:"edit",attrs:{props:t}},[o("q-btn",{staticClass:"q-mr-md",attrs:{color:"negative",size:"13px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(o){return e.deleteEmploye(t.row)}}})],1)],1)]}}])})],1)]),o("q-dialog",{model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}},[o("employeAdd",{on:{close:e.itemAdded}})],1)],1)},n=[],l=o("16b2"),s={name:"PagePage1",computed:{db:{get:function(){return this.$store.getters["teste/db"]},set:function(e){this.$store.commit("teste/set_db",e)}}},data(){return{employes:[],filter:"",addDialog:!1,updateDialog:!1,columns:[{name:"_id",field:"_id",label:"id",align:"left",sortable:!0},{name:"name",field:"name",label:"name",align:"left",sortable:!0},{name:"edit",align:"right"}],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10},deferredPrompt:null,showInstallPromotion:!1}},components:{employeAdd:o("d0c8").default,employeUpdate:o("0bac").default},methods:{showAll(){console.log("showAll()---------------------\x3e");let e=this;e.employes=[],this.db.allDocs({include_docs:!0},(function(t,o){if(t)return console.log(t);for(let a=0;a<o.rows.length;a++)e.employes.push(o.rows[a].doc)})),console.log(e.employes)},itemAdded(){this.addDialog=!1,this.$q.notify({message:"employe succsufly added !",color:"positive"})},deleteEmploye(e){this.$q.dialog({name:"Supprission",message:"Voulez vous supprimer ?",cancel:!0,persistent:!0}).onOk((()=>{this.db.remove(e,(function(e){if(e)return console.log(e);console.log("Document deleted successfully")}))})).onCancel((()=>{console.log(">>>> Cancel")}))},async install(){this.showInstallPromotion=!1,this.deferredPrompt.prompt();const{outcome:e}=await this.deferredPrompt.userChoice;console.log(`User response to the install prompt: ${e}`),this.deferredPrompt=null}},created(){this.db=new l["a"]("tododb");var e=new l["a"]("https://dsa46.ddns.net:6984//tododb",{fetch:function(e,t){return t.headers.set("Authorization","Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJtYWRyIiwicm9sZXMiOlsibGVjdHVyZV9tYWRyIiwibGVjdHVyZV93aWxheWEiXSwiX2NvdWNoZGIucm9sZXMiOlsibGVjdHVyZV9tYWRyIiwibGVjdHVyZV93aWxheWEiXSwiaWF0IjoxNjIzMTUwNjIyfQ.97xnp4aXu4LD0A4h_hg1K-g7PhWlr4qZisqn4OXrMVE"),l["a"].fetch(e,t)}});this.db.sync(e,{live:!0,retry:!0}).on("change",(e=>{console.log("data change",e),this.showAll()})).on("error",(function(e){console.log("sync error",e)})),this.showAll(),window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),this.deferredPrompt=e,this.showInstallPromotion=!0,console.log("'beforeinstallprompt' event was fired.")}))}},i=s,r=o("2877"),c=o("9989"),d=o("54e1"),u=o("0016"),p=o("9c40"),m=o("eaac"),f=o("27f9"),h=o("2c91"),b=o("bd08"),y=o("db86"),g=o("24e8"),x=o("eebe"),w=o.n(x),v=Object(r["a"])(i,a,n,!1,null,null,null);t["default"]=v.exports;w()(v,"components",{QPage:c["a"],QBanner:d["a"],QIcon:u["a"],QBtn:p["a"],QTable:m["a"],QInput:f["a"],QSpace:h["a"],QTr:b["a"],QTd:y["a"],QDialog:g["a"]})},d0c8:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[o("q-card-section",[o("div",{staticClass:"text-h6"},[e._v("Add Employe")])]),o("q-card-section",[o("q-input",{ref:"name",attrs:{label:"Name",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.employeToSubmit.name,callback:function(t){e.$set(e.employeToSubmit,"name",t)},expression:"employeToSubmit.name"}})],1),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{push:"",label:"Cancel",color:"red-5"}}),o("q-btn",{attrs:{push:"",label:"OK",color:"primary"},on:{click:e.submit}})],1)],1)},n=[],l=(o("ac1f"),o("5319"),{data(){return{employeToSubmit:{_id:this.create_UUID(),_rev:"",name:""}}},methods:{submit(){let e={_id:this.create_UUID(),name:this.employeToSubmit.name};this.db.put(e,(function(e,t){if(e)return console.log(e);console.log("Document created Successfully")})),this.$emit("close")},create_UUID(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)}));return t}},computed:{db:function(){return this.$store.getters["teste/db"]}}}),s=l,i=o("2877"),r=o("f09f"),c=o("a370"),d=o("27f9"),u=o("4b7e"),p=o("9c40"),m=o("7f67"),f=o("eebe"),h=o.n(f),b=Object(i["a"])(s,a,n,!1,null,null,null);t["default"]=b.exports;h()(b,"components",{QCard:r["a"],QCardSection:c["a"],QInput:d["a"],QCardActions:u["a"],QBtn:p["a"]}),h()(b,"directives",{ClosePopup:m["a"]})}}]);