(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{3366:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("q-select",{staticClass:"q-ml-md",staticStyle:{"max-width":"300px"},attrs:{options:e.options,dense:"",borderless:"",filled:""},scopedSlots:e._u([{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[e._v("Pas de resultat")])],1)]},proxy:!0}]),model:{value:e.type_fiche,callback:function(t){e.type_fiche=t},expression:"type_fiche"}})],1)},r=[],n={data(){return{options:["renseignées","validées"]}},methods:{},computed:{type_fiche:{get:function(){return this.$store.getters["fiche/type_fiche"]},set:function(e){this.$store.commit("fiche/set_type_fiche",e)}}},mounted(){}},i=n,c=s("2877"),o=s("ddd8"),l=s("66e5"),h=s("4074"),u=s("eebe"),d=s.n(u),f=Object(c["a"])(i,a,r,!1,null,null,null);t["default"]=f.exports;d()(f,"components",{QSelect:o["a"],QItem:l["a"],QItemSection:h["a"]})},"4af1":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"q-mr-sm"},[s("q-card-section",{staticClass:"\n            bg-white\n            q-mb-md q-pa-sm\n            text-center text-blue-grey-9 text-bold text-uppercase\n          "},[s("div",{staticClass:"row"},[s("span",{staticClass:"col-auto q-mt-sm"},[e._v("Fiches renseignées/jour")]),s("select-valide",{staticClass:"col-auto"}),"MADR"==e.user.typeCompte?s("select-wilaya",{staticClass:"col-auto q-ml-sm"}):e._e(),e.wilaya?s("select-commune",{staticClass:"col-auto q-ml-sm"}):e._e(),s("q-space"),s("div",{staticClass:"col-auto"},[s("q-btn",{attrs:{round:"",flat:"",icon:"navigate_before"},on:{click:e.calendarPrev}}),s("span",{staticClass:"q-mx-md"},[e._v(e._s(e.title))]),s("q-btn",{attrs:{round:"",flat:"",icon:"navigate_next"},on:{click:e.calendarNext}}),s("q-btn",{staticClass:"col-auto q-ml-md",attrs:{color:"grey-3","text-color":"blue-grey",unelevated:"",icon:"refresh",label:"Actualiser",dense:""},on:{click:e.refresh}})],1)],1)]),s("q-separator"),s("q-card-section",{staticClass:"no-padding"},[s("q-calendar",{ref:"calendar",attrs:{view:"month",locale:"fr-fr",animated:"","transition-prev":"slide-right","transition-next":"slide-left"},on:{change:e.onChange},scopedSlots:e._u([{key:"day",fn:function(t){var a=t.timestamp;return[e._l(e.getEvents(a.date),(function(t,a){return[s("div",{staticClass:"text-center"},[s("q-chip",{attrs:{color:"primary","text-color":"white"}},[e._v("\n                    "+e._s(t.value)+"\n                  ")])],1)]}))]}}]),model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1)],1)],1)])])},r=[],n=s("fe7a"),i=(s("3883"),s("bd4c")),c=s("61cc"),o=s.n(c),l={computed:{},data(){return{selectedDate:"",title:"",x:[],y:[]}},components:{QCalendar:n["a"],"select-wilaya":s("0b56").default,"select-commune":s("2112").default,"select-valide":s("3366").default},computed:{events:function(){return this.$store.getters["fiche/events"]},wilaya:function(){return this.$store.getters["fiche/wilaya"]},commune:function(){return this.$store.getters["fiche/commune"]},type_fiche:function(){return this.$store.getters["fiche/type_fiche"]},user:function(){return this.$store.getters["auth/user"]},view(){return this.commune?"calendrier_commune":this.wilaya?"calendrier_wilaya":"calendrier"}},watch:{wilaya:function(e){this.refresh()},commune:function(e){this.refresh()},type_fiche:function(e){this.refresh()}},methods:{calendarNext(){this.$refs.calendar.next()},calendarPrev(){this.$refs.calendar.prev()},onChange({start:e}){let t=e.date,s=i["a"].extractDate(t,"YYYY-MM-DD");this.title=i["a"].formatDate(s,"MMMM YYYY")},frDateFrm(e){let t=i["a"].extractDate(e,"YYYY-MM-DD");return i["a"].formatDate(t,"DD-MM-YYYY")},getEvents(e){let t=[],s=this.frDateFrm(e);for(let a=0;a<this.events.length;a++)s==this.events[a].key[1]&&t.push(this.events[a]);return t},refresh(){let e="rga";"renseignées"==this.type_fiche&&(e="rga_validation"),"calendrier"==this.view?this.$store.dispatch("fiche/getEvents",{url:"https://rga.madr.gov.dz:6984/"+e+"/_design/view/_view/"+this.view+"?group=true"}).then(()=>{this.refreshChart()}):"calendrier_wilaya"==this.view?this.$store.dispatch("fiche/getEvents",{url:"https://rga.madr.gov.dz:6984/"+e+"/_design/view/_view/"+this.view+"?group=true&startkey=["+this.wilaya.id+',""]&endkey=['+(this.wilaya.id+1)+',""]'}).then(()=>{this.refreshChart()}):"calendrier_commune"==this.view&&this.$store.dispatch("fiche/getEvents",{url:"https://rga.madr.gov.dz:6984/"+e+"/_design/view/_view/"+this.view+"?group=true&startkey=["+this.commune.commune_code+',""]&endkey=['+(this.commune.commune_code+1)+',""]'}).then(()=>{this.refreshChart()})},refreshChart(){this.x=[],this.y=[];for(let s=0;s<this.events.length;s++)console.log(i["a"].formatDate(i["a"].extractDate(this.events[s].key[1],"DD-MM-YYYY"),"YYYY-MM-DD")),this.x.push(i["a"].formatDate(i["a"].extractDate(this.events[s].key[1],"DD-MM-YYYY"),"YYYY-MM-DD")),this.y.push(this.events[s].value);console.log(this.x.length),console.log(this.y.length);var e=this.$refs.tester,t=[{x:this.x,y:this.y,type:"scatter"}];o.a.newPlot(e,t,{margin:{t:0}})}},mounted(){this.refresh()}},h=l,u=s("2877"),d=s("9989"),f=s("f09f"),m=s("a370"),p=s("2c91"),v=s("9c40"),g=s("eb85"),y=s("b047"),_=s("eebe"),w=s.n(_),x=Object(u["a"])(h,a,r,!1,null,"4cfad478",null);t["default"]=x.exports;w()(x,"components",{QPage:d["a"],QCard:f["a"],QCardSection:m["a"],QSpace:p["a"],QBtn:v["a"],QSeparator:g["a"],QChip:y["a"]})},"6cd5":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("taskDesktop")],1)},r=[],n={components:{taskDesktop:s("4af1").default}},i=n,c=s("2877"),o=s("9989"),l=s("eebe"),h=s.n(l),u=Object(c["a"])(i,a,r,!1,null,null,null);t["default"]=u.exports;h()(u,"components",{QPage:o["a"]})}}]);