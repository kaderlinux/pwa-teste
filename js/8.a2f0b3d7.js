(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0a16":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Add User")])]),s("q-card-section",[s("q-input",{ref:"name",attrs:{label:"Name",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.userToSubmit.name,callback:function(t){e.$set(e.userToSubmit,"name",t)},expression:"userToSubmit.name"}}),s("q-input",{ref:"username",attrs:{label:"User Name",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.userToSubmit.username,callback:function(t){e.$set(e.userToSubmit,"username",t)},expression:"userToSubmit.username"}}),s("q-input",{ref:"password",attrs:{label:"Password",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.userToSubmit.password,callback:function(t){e.$set(e.userToSubmit,"password",t)},expression:"userToSubmit.password"}}),s("q-select",{staticClass:"q-mb-md",attrs:{options:e.typeCompteOptions,label:"Type de compte"},model:{value:e.userToSubmit.typeCompte,callback:function(t){e.$set(e.userToSubmit,"typeCompte",t)},expression:"userToSubmit.typeCompte"}}),s("select-commune",{attrs:{currentUser:e.userToSubmit}}),s("q-select",{ref:"roles",staticClass:"q-mt-md",attrs:{multiple:"",options:e.options,"use-chips":"",label:"Roles",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.userToSubmit.roles,callback:function(t){e.$set(e.userToSubmit,"roles",t)},expression:"userToSubmit.roles"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{push:"",label:"Cancel",color:"red-5"}}),s("q-btn",{attrs:{push:"",label:"OK",color:"primary"},on:{click:e.submit}})],1)],1)},a=[],n=s("ded3"),o=s.n(n),i=s("2f62"),l=s("dba2"),u={components:{SelectCommune:l["a"]},data(){return{userToSubmit:{name:"",username:"",password:"",wilaya:null,roles:[]},options:["gestion_comptes","get_token","save_token","ecriture_madr","lecture_madr","ecriture_wilaya","lecture_wilaya"],typeCompteOptions:["MADR","WILAYA","COMMUNE"],stringOptionsWilaya:[],optionsWilaya:[]}},methods:o()(o()({},Object(i["b"])(["user/addUser"])),{},{submit(){this.$refs.name.validate(),this.$refs.name.hasError||this.$refs.username.hasError||this.$refs.password.hasError||this.$refs.roles.hasError||(this.$store.dispatch("user/addUser",this.userToSubmit).then(()=>{}),this.$emit("close"))},filterFn(e,t,s){t(""!==e?()=>{const t=e.toLowerCase();this.optionsWilaya=this.stringOptionsWilaya.filter(e=>e.label.toLowerCase().includes(t))}:()=>{this.optionsWilaya=this.stringOptionsWilaya})},abortFilterFn(){}}),computed:{users:function(){return this.$store.getters["user/users"]},wilayas:function(){return this.$store.getters["wilaya/wilayas"]}},mounted(){this.stringOptionsWilaya=this.wilayas.map(e=>({label:e.id+". "+e.name,value:e})),this.optionsWilaya=this.wilayas.map(e=>({label:e.id+". "+e.name,value:e}))}},c=u,m=s("2877"),d=s("f09f"),p=s("a370"),f=s("27f9"),b=s("ddd8"),h=s("4b7e"),y=s("9c40"),g=s("7f67"),q=s("eebe"),v=s.n(q),w=Object(m["a"])(c,r,a,!1,null,null,null);t["default"]=w.exports;v()(w,"components",{QCard:d["a"],QCardSection:p["a"],QInput:f["a"],QSelect:b["a"],QCardActions:h["a"],QBtn:y["a"]}),v()(w,"directives",{ClosePopup:g["a"]})},6733:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-table",{attrs:{name:"User",data:e.users,columns:e.columns,"row-key":"name",filter:e.filter,pagination:e.pagination},scopedSlots:e._u([{key:"top",fn:function(t){return[s("span",{staticClass:"text-h5"},[e._v("Gestion des comptes")]),s("q-select",{staticClass:"q-mx-md",staticStyle:{"min-width":"200px"},attrs:{options:e.typeCompteOptions,filled:"",dense:""},model:{value:e.type_compte,callback:function(t){e.type_compte=t},expression:"type_compte"}}),s("q-input",{staticClass:"q-mx-md",attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Rechercher",filled:""},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),s("q-space"),s("q-btn",{staticClass:"q-ml-sm",attrs:{color:"blue",label:"Ajouter","no-caps":""},on:{click:function(t){e.addDialog=!0}}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{color:"primary",label:"actualiser","no-caps":""},on:{click:function(t){return e.getUsers()}}})]}},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.rowIndex+1))]),s("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name))]),s("q-td",{key:"username",attrs:{props:t}},[e._v(e._s(t.row.username))]),s("q-td",{key:"wilaya",attrs:{props:t}},[e._v(e._s(t.row.commune?t.row.commune.wilaya.name:""))]),s("q-td",{key:"commune",attrs:{props:t}},[e._v(e._s(t.row.commune?t.row.commune.name:""))]),s("q-td",{key:"roles",attrs:{props:t}},[e._v(e._s(t.row.roles))]),s("q-td",{key:"edit",attrs:{props:t}},[s("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",size:"13px",flat:"",dense:"",round:"",icon:"edit"},on:{click:function(s){return e.editUser(t.row.id)}}}),s("q-btn",{staticClass:"q-mr-md",attrs:{color:"negative",size:"13px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(s){return e.deleteUser(t.row.id)}}})],1)],1)]}}])})],1)]),s("q-dialog",{model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}},[s("userAdd",{on:{close:e.itemAdded}})],1),s("q-dialog",{model:{value:e.updateDialog,callback:function(t){e.updateDialog=t},expression:"updateDialog"}},[s("userUpdate",{on:{close:function(t){e.updateDialog=!1}}})],1)],1)},a=[],n={name:"PagePage1",computed:{users:function(){return this.$store.getters["user/users"]},type_compte:{get:function(){return this.$store.getters["user/type_compte"]},set:function(e){this.$store.commit("user/set_type_compte",e)}}},watch:{type_compte:function(e){this.getUsers()}},data(){return{filter:"",addDialog:!1,updateDialog:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10},columns:[{name:"id",field:"id",label:"id",align:"left",sortable:!0},{name:"name",field:"name",label:"Name",align:"left",sortable:!0},{name:"username",field:"username",label:"User Name",align:"left",sortable:!0},{name:"wilaya",field:"commune.wilaya.name",label:"Wilaya",align:"left",sortable:!0},{name:"commune",field:"commune.name",label:"Commune",align:"left",sortable:!0},{name:"roles",field:"roles",label:"Roles",align:"left",sortable:!0},{name:"edit",align:"right"}],typeCompteOptions:["MADR","WILAYA","COMMUNE"]}},components:{userAdd:s("0a16").default,userUpdate:s("fd5d").default},methods:{editUser(e){this.$store.dispatch("user/setCurrentUserById",e),this.updateDialog=!0},deleteUser(e){this.$q.dialog({name:"Supprission",message:"Voulez vous supprimer ?",cancel:!0,persistent:!0}).onOk(()=>{this.$store.dispatch("user/deleteUser",e)}).onCancel(()=>{console.log(">>>> Cancel")})},itemAdded(){this.addDialog=!1,this.$q.notify({message:"user succsufly added !",color:"positive"})},getUsers(){this.$store.dispatch("user/getUsersByType").then(()=>{})}},mounted(){this.getUsers()},created(){this.$store.dispatch("commune/getCommunes")}},o=n,i=s("2877"),l=s("9989"),u=s("eaac"),c=s("ddd8"),m=s("27f9"),d=s("0016"),p=s("2c91"),f=s("9c40"),b=s("bd08"),h=s("db86"),y=s("24e8"),g=s("eebe"),q=s.n(g),v=Object(i["a"])(o,r,a,!1,null,null,null);t["default"]=v.exports;q()(v,"components",{QPage:l["a"],QTable:u["a"],QSelect:c["a"],QInput:m["a"],QIcon:d["a"],QSpace:p["a"],QBtn:f["a"],QTr:b["a"],QTd:h["a"],QDialog:y["a"]})},d843:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("userDesktop")],1)},a=[],n={components:{userDesktop:s("6733").default}},o=n,i=s("2877"),l=s("9989"),u=s("eebe"),c=s.n(u),m=Object(i["a"])(o,r,a,!1,null,null,null);t["default"]=m.exports;c()(m,"components",{QPage:l["a"]})},dba2:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-select",{ref:"commune",attrs:{options:e.options,"map-options":"","emit-value":"",clearable:"","use-input":"",label:"Commune",rules:[function(e){return!!e||"Field is required"}]},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[e._v("Pas de resultat")])],1)]},proxy:!0}]),model:{value:e.currentUser.commune,callback:function(t){e.$set(e.currentUser,"commune",t)},expression:"currentUser.commune"}})],1)},a=[],n={props:["currentUser"],data(){return{stringOptions:[],options:[]}},methods:{filterFn(e,t,s){t(""!==e?()=>{const t=e.toLowerCase();this.options=this.stringOptions.filter(e=>e.ville.toLowerCase().includes(t))}:()=>{this.options=this.stringOptions})},abortFilterFn(){}},computed:{communes:function(){return this.$store.getters["commune/communes"]}},mounted(){this.stringOptions=this.communes.map(e=>({label:e.name+" <span class='text-grey'>"+e.wilaya.name+"</span>",ville:e.name,value:e})),this.options=this.communes.map(e=>({label:e.name+" <span class='text-grey'>"+e.wilaya.name+"</span>",ville:e.name,value:e}))}},o=n,i=s("2877"),l=s("ddd8"),u=s("66e5"),c=s("4074"),m=s("eebe"),d=s.n(m),p=Object(i["a"])(o,r,a,!1,null,null,null);t["a"]=p.exports;d()(p,"components",{QSelect:l["a"],QItem:u["a"],QItemSection:c["a"]})},fd5d:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Update User")])]),s("q-card-section",[s("q-input",{ref:"name",attrs:{label:"Name",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.currentUser.name,callback:function(t){e.$set(e.currentUser,"name",t)},expression:"currentUser.name"}}),s("q-input",{ref:"username",attrs:{label:"User Name",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.currentUser.username,callback:function(t){e.$set(e.currentUser,"username",t)},expression:"currentUser.username"}}),s("q-input",{ref:"password",attrs:{label:"Password",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.currentUser.password,callback:function(t){e.$set(e.currentUser,"password",t)},expression:"currentUser.password"}}),s("q-select",{staticClass:"q-mb-md",attrs:{options:e.typeCompteOptions,label:"Type de compte"},model:{value:e.currentUser.typeCompte,callback:function(t){e.$set(e.currentUser,"typeCompte",t)},expression:"currentUser.typeCompte"}}),s("select-commune",{attrs:{currentUser:e.currentUser}}),s("q-select",{ref:"roles",staticClass:"q-mt-md",attrs:{multiple:"",options:e.options,"use-chips":"","stack-label":"",label:"Roles",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.currentUser.roles,callback:function(t){e.$set(e.currentUser,"roles",t)},expression:"currentUser.roles"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{push:"",label:"Cancel",color:"red-5"}}),s("q-btn",{attrs:{push:"",label:"OK",color:"primary"},on:{click:e.submit}})],1)],1)},a=[],n=s("ded3"),o=s.n(n),i=s("2f62"),l=s("dba2"),u={computed:{currentUser:{get:function(){return this.$store.getters["user/currentUser"]},set:function(e){this.$store.commit("user/set_current_user",e)}},users:function(){return this.$store.getters["user/users"]}},data(){return{options:["gestion_comptes","get_token","save_token","ecriture_madr","lecture_madr","ecriture_wilaya","lecture_wilaya"],typeCompteOptions:["MADR","WILAYA","COMMUNE"]}},components:{SelectCommune:l["a"]},methods:o()(o()({},Object(i["b"])(["user/updateUser"])),{},{submit(){this.$refs.name.validate(),this.$refs.name.hasError||this.$refs.password.hasError||(this.$store.dispatch("user/updateUser").then(()=>{}),this.$emit("close"))}})},c=u,m=s("2877"),d=s("f09f"),p=s("a370"),f=s("27f9"),b=s("ddd8"),h=s("4b7e"),y=s("9c40"),g=s("7f67"),q=s("eebe"),v=s.n(q),w=Object(m["a"])(c,r,a,!1,null,null,null);t["default"]=w.exports;v()(w,"components",{QCard:d["a"],QCardSection:p["a"],QInput:f["a"],QSelect:b["a"],QCardActions:h["a"],QBtn:y["a"]}),v()(w,"directives",{ClosePopup:g["a"]})}}]);